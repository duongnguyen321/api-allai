const e=require("json-server"),t=e.create(),s=e.router("db.json"),o=e.defaults(),r=process.env.PORT||3001;t.use(o),t.use(e.bodyParser),t.use(((e,t,o)=>{if(("POST"===e.method||"GET"===e.method)&&"/chat-history"===e.path){const e=s.db.get("chat-history").value();e.length>7&&s.db.get("chat-history").remove({id:e[0].id}).write()}o()})),t.get("/all",((e,t)=>{const o=[...s.db.get("chat-training").value(),...s.db.get("chat-history").value()];t.jsonp(o)})),t.use(s),t.listen(r,(()=>{console.log("App listening on post: "+r)}));